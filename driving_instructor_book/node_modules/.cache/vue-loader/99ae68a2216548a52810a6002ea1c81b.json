{"remainingRequest":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue?vue&type=style&index=1&id=ff70abd0&lang=css","dependencies":[{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue","mtime":1663917139985},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/css-loader/dist/cjs.js","mtime":1663066737196},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1663066740755},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/postcss-loader/src/index.js","mtime":1663066738352},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js","mtime":1663066735138},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/index.js","mtime":1663066738351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Cjpyb290IHsKICAtLXZhbi1jaGVja2JveC1zaXplOiA4cHg7CiAgLS12YW4tYWN0aW9uLWJhci1pY29uLXNpemU6IDEzcHg7CiAgLS12YW4tc3VibWl0LWJhci1oZWlnaHQ6IDE1cHg7CiAgLS12YW4tc3VibWl0LWJhci1idXR0b24td2lkdGg6IDU1cHg7CiAgLS12YW4tc3VibWl0LWJhci1wcmljZS1mb250LXNpemU6IDhweDsKICAtLXZhbi1zdWJtaXQtYmFyLXByaWNlLWludGVnZXItZm9udC1zaXplOiA4cHg7CiAgLS12YW4tc3VibWl0LWJhci10ZXh0LWZvbnQtc2l6ZTogMTBweDsKICAtLXZhbi1zdWJtaXQtYmFyLXRpcC1mb250LXNpemU6IDEwcHg7CiAgLS12YW4tc3VibWl0LWJhci10aXAtaWNvbi1zaXplOiA2cHg7CiAgLS12YW4tc3VibWl0LWJhci1idXR0b24taGVpZ2h0OiAyMHB4Owp9Cg=="},{"version":3,"sources":["/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue"],"names":[],"mappings":";AAkOA,CAAC,CAAC,CAAC,CAAC,EAAE;EACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAC7B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACnC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACrC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAC7C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACrC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACpC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACnC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACtC","file":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"cartDetails\">\n    <!-- Goods List -->\n    <div class=\"content\">\n      <van-checkbox-group v-model=\"result\" @change=\"groupChange\">\n        <div v-for=\"(i, index) in store.state.cartList\">\n          <CourseAdd :item=\"i\" :showCheckbox=\"true\" :onChange=\"onChange\" />\n        </div>\n      </van-checkbox-group>\n    </div>\n    <!-- Settle bill -->\n    <van-submit-bar\n      :price=\"allPrice * 100\"\n      button-text=\"Checkout\"\n      @submit=\"onSubmit\"\n      class=\"submit-all\"\n      button-color=\"#ffc400\"\n      currency=\"$\"\n      v-if=\"isDelete\"\n    >\n      <van-checkbox v-model=\"checked\" checked-color=\"#ffc400\" @click=\"choseAll\"\n        >All</van-checkbox\n      >\n    </van-submit-bar>\n\n    <!-- delete -->\n    <div class=\"buy\" v-else>\n      <div class=\"left\">\n        <van-checkbox\n          v-model=\"checked\"\n          checked-color=\"#ffc400\"\n          @click=\"choseAll\"\n          >All</van-checkbox\n        >\n      </div>\n      <div class=\"delete\" @click=\"deleteClick\">Delete</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { declareTypeAlias } from '@babel/types';\nimport { onMounted, reactive, toRefs, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport CourseAdd from '../../../components/CourseAdd.vue';\nimport emitter from '../../../common/js/eventbus.js';\n\nexport default {\n  components: { CourseAdd },\n  props: ['changeShow'],\n  setup(props) {\n    const store = useStore();\n    const router = useRouter();\n    let data = reactive({\n      result: [],\n      checked: true,\n      isDelete: true,\n    });\n\n    //goods default selection initialization\n    const init = () => {\n      data.result = store.state.cartList.map((item) => item.id);\n    };\n\n    onMounted(() => {\n      init();\n    });\n\n    //goods number sycchronization\n    const onChange = (value, detail) => {\n      store.state.cartList.map((item) => {\n        if (item.id === detail.name) {\n          item.num = value;\n        }\n      });\n    };\n\n    //select all and unselect all\n    const choseAll = () => {\n      if (data.result.length !== store.state.cartList.length) {\n        init();\n      } else {\n        data.result = [];\n      }\n    };\n\n    //update data\n    const update = (type) => {\n      return store.state.cartList.filter((item) => {\n        return type === 2\n          ? data.result.includes(item.id)\n          : !data.result.includes(item.id);\n      });\n    };\n\n    //checkout\n    const onSubmit = () => {\n      if (data.result.length !== 0) {\n        store.commit('PAY', update(2));\n        router.push({\n          path: './createorder',\n          query: {\n            list: data.result,\n          },\n        });\n      } else {\n        Toast.fail('Please select items to checkout');\n      }\n    };\n\n    //every select trigger\n    const groupChange = (result) => {\n      if (result.length === store.state.cartList.length) {\n        data.checked = true;\n      } else {\n        data.checked = false;\n      }\n      data.result = result;\n    };\n\n    //price in total\n    const allPrice = computed(() => {\n      let countList = update(2);\n      let sum = 0;\n      countList.forEach((item) => {\n        sum += item.num * item.price;\n      });\n      return sum;\n    });\n\n    //listen edit click\n    emitter.on('edit', () => {\n      data.isDelete = !data.isDelete;\n    });\n\n    //delete button\n    const deleteClick = () => {\n      if (data.result.length) {\n        //update cart data after delete\n        store.commit('DELETE', update(1));\n\n        //select after delete\n        data.result = [];\n\n        //cart is empty\n        if (store.state.cartList.length === 0) {\n          store.commit('EDIT', 'delete');\n          props.changeShow();\n        }\n      } else {\n        Toast.fail('Please select');\n      }\n    };\n\n    return {\n      ...toRefs(data),\n      store,\n      onChange,\n      onSubmit,\n      choseAll,\n      groupChange,\n      allPrice,\n      deleteClick,\n    };\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n/deep/ .van-button--normal {\n  font-size: 10px;\n}\n/deep/ .van-submit-bar__bar {\n  font-size: 8px;\n  padding: 5px;\n}\n\n.cartDetails {\n  font-size: 14px;\n  flex: 1;\n  position: relative;\n  overflow-y: auto;\n  padding: 10px 10px 55px;\n  .submit-all {\n    position: fixed;\n    bottom: 20px;\n  }\n\n  .buy {\n    position: fixed;\n    bottom: 20px;\n    right: 0;\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    background-color: #fff;\n    border-radius: 5px;\n    height: 25px;\n    align-items: center;\n    padding: 0 16px;\n    box-sizing: border-box;\n    .left {\n      display: flex;\n      align-items: center;\n    }\n    .delete {\n      color: #fff;\n      background-color: #ffc400;\n      border-radius: 20px;\n      font-size: 10px;\n      font-weight: 500;\n      width: 50px;\n      height: 20px;\n      text-align: center;\n      line-height: 20px;\n    }\n  }\n\n  .content {\n    padding: 10px;\n    background-color: #fff;\n    border-radius: 10px;\n  }\n}\n</style>\n<style>\n:root {\n  --van-checkbox-size: 8px;\n  --van-action-bar-icon-size: 13px;\n  --van-submit-bar-height: 15px;\n  --van-submit-bar-button-width: 55px;\n  --van-submit-bar-price-font-size: 8px;\n  --van-submit-bar-price-integer-font-size: 8px;\n  --van-submit-bar-text-font-size: 10px;\n  --van-submit-bar-tip-font-size: 10px;\n  --van-submit-bar-tip-icon-size: 6px;\n  --van-submit-bar-button-height: 20px;\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/babel-loader/lib/index.js!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue","mtime":1663917139985},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/babel.config.js","mtime":1658634198971},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js","mtime":1663066735138},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/babel-loader/lib/index.js","mtime":1663066738371},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js","mtime":1663066735138},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/index.js","mtime":1663066738351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVjbGFyZVR5cGVBbGlhcyB9IGZyb20gJ0BiYWJlbC90eXBlcyc7CmltcG9ydCB7IG9uTW91bnRlZCwgcmVhY3RpdmUsIHRvUmVmcywgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IENvdXJzZUFkZCBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL0NvdXJzZUFkZC52dWUnOwppbXBvcnQgZW1pdHRlciBmcm9tICcuLi8uLi8uLi9jb21tb24vanMvZXZlbnRidXMuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ291cnNlQWRkCiAgfSwKICBwcm9wczogWydjaGFuZ2VTaG93J10sCgogIHNldHVwKHByb3BzKSB7CiAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIGxldCBkYXRhID0gcmVhY3RpdmUoewogICAgICByZXN1bHQ6IFtdLAogICAgICBjaGVja2VkOiB0cnVlLAogICAgICBpc0RlbGV0ZTogdHJ1ZQogICAgfSk7IC8vZ29vZHMgZGVmYXVsdCBzZWxlY3Rpb24gaW5pdGlhbGl6YXRpb24KCiAgICBjb25zdCBpbml0ID0gKCkgPT4gewogICAgICBkYXRhLnJlc3VsdCA9IHN0b3JlLnN0YXRlLmNhcnRMaXN0Lm1hcChpdGVtID0+IGl0ZW0uaWQpOwogICAgfTsKCiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICBpbml0KCk7CiAgICB9KTsgLy9nb29kcyBudW1iZXIgc3ljY2hyb25pemF0aW9uCgogICAgY29uc3Qgb25DaGFuZ2UgPSAodmFsdWUsIGRldGFpbCkgPT4gewogICAgICBzdG9yZS5zdGF0ZS5jYXJ0TGlzdC5tYXAoaXRlbSA9PiB7CiAgICAgICAgaWYgKGl0ZW0uaWQgPT09IGRldGFpbC5uYW1lKSB7CiAgICAgICAgICBpdGVtLm51bSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OyAvL3NlbGVjdCBhbGwgYW5kIHVuc2VsZWN0IGFsbAoKCiAgICBjb25zdCBjaG9zZUFsbCA9ICgpID0+IHsKICAgICAgaWYgKGRhdGEucmVzdWx0Lmxlbmd0aCAhPT0gc3RvcmUuc3RhdGUuY2FydExpc3QubGVuZ3RoKSB7CiAgICAgICAgaW5pdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEucmVzdWx0ID0gW107CiAgICAgIH0KICAgIH07IC8vdXBkYXRlIGRhdGEKCgogICAgY29uc3QgdXBkYXRlID0gdHlwZSA9PiB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5jYXJ0TGlzdC5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIHR5cGUgPT09IDIgPyBkYXRhLnJlc3VsdC5pbmNsdWRlcyhpdGVtLmlkKSA6ICFkYXRhLnJlc3VsdC5pbmNsdWRlcyhpdGVtLmlkKTsKICAgICAgfSk7CiAgICB9OyAvL2NoZWNrb3V0CgoKICAgIGNvbnN0IG9uU3VibWl0ID0gKCkgPT4gewogICAgICBpZiAoZGF0YS5yZXN1bHQubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgc3RvcmUuY29tbWl0KCdQQVknLCB1cGRhdGUoMikpOwogICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICcuL2NyZWF0ZW9yZGVyJywKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIGxpc3Q6IGRhdGEucmVzdWx0CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgVG9hc3QuZmFpbCgnUGxlYXNlIHNlbGVjdCBpdGVtcyB0byBjaGVja291dCcpOwogICAgICB9CiAgICB9OyAvL2V2ZXJ5IHNlbGVjdCB0cmlnZ2VyCgoKICAgIGNvbnN0IGdyb3VwQ2hhbmdlID0gcmVzdWx0ID0+IHsKICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IHN0b3JlLnN0YXRlLmNhcnRMaXN0Lmxlbmd0aCkgewogICAgICAgIGRhdGEuY2hlY2tlZCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0YS5jaGVja2VkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGRhdGEucmVzdWx0ID0gcmVzdWx0OwogICAgfTsgLy9wcmljZSBpbiB0b3RhbAoKCiAgICBjb25zdCBhbGxQcmljZSA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgbGV0IGNvdW50TGlzdCA9IHVwZGF0ZSgyKTsKICAgICAgbGV0IHN1bSA9IDA7CiAgICAgIGNvdW50TGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIHN1bSArPSBpdGVtLm51bSAqIGl0ZW0ucHJpY2U7CiAgICAgIH0pOwogICAgICByZXR1cm4gc3VtOwogICAgfSk7IC8vbGlzdGVuIGVkaXQgY2xpY2sKCiAgICBlbWl0dGVyLm9uKCdlZGl0JywgKCkgPT4gewogICAgICBkYXRhLmlzRGVsZXRlID0gIWRhdGEuaXNEZWxldGU7CiAgICB9KTsgLy9kZWxldGUgYnV0dG9uCgogICAgY29uc3QgZGVsZXRlQ2xpY2sgPSAoKSA9PiB7CiAgICAgIGlmIChkYXRhLnJlc3VsdC5sZW5ndGgpIHsKICAgICAgICAvL3VwZGF0ZSBjYXJ0IGRhdGEgYWZ0ZXIgZGVsZXRlCiAgICAgICAgc3RvcmUuY29tbWl0KCdERUxFVEUnLCB1cGRhdGUoMSkpOyAvL3NlbGVjdCBhZnRlciBkZWxldGUKCiAgICAgICAgZGF0YS5yZXN1bHQgPSBbXTsgLy9jYXJ0IGlzIGVtcHR5CgogICAgICAgIGlmIChzdG9yZS5zdGF0ZS5jYXJ0TGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHN0b3JlLmNvbW1pdCgnRURJVCcsICdkZWxldGUnKTsKICAgICAgICAgIHByb3BzLmNoYW5nZVNob3coKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgVG9hc3QuZmFpbCgnUGxlYXNlIHNlbGVjdCcpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiB7IC4uLnRvUmVmcyhkYXRhKSwKICAgICAgc3RvcmUsCiAgICAgIG9uQ2hhbmdlLAogICAgICBvblN1Ym1pdCwKICAgICAgY2hvc2VBbGwsCiAgICAgIGdyb3VwQ2hhbmdlLAogICAgICBhbGxQcmljZSwKICAgICAgZGVsZXRlQ2xpY2sKICAgIH07CiAgfQoKfTs="},{"version":3,"mappings":"AAyCA,SAASA,gBAAT,QAAiC,cAAjC;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,EAAsCC,QAAtC,QAAsD,KAAtD;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,OAAOC,SAAP,MAAsB,mCAAtB;AACA,OAAOC,OAAP,MAAoB,gCAApB;AAEA,eAAe;EACbC,UAAU,EAAE;IAAEF;EAAF,CADC;EAEbG,KAAK,EAAE,CAAC,YAAD,CAFM;;EAGbC,KAAK,CAACD,KAAD,EAAQ;IACX,MAAME,KAAI,GAAIP,QAAQ,EAAtB;IACA,MAAMQ,MAAK,GAAIP,SAAS,EAAxB;IACA,IAAIQ,IAAG,GAAIZ,QAAQ,CAAC;MAClBa,MAAM,EAAE,EADU;MAElBC,OAAO,EAAE,IAFS;MAGlBC,QAAQ,EAAE;IAHQ,CAAD,CAAnB,CAHW,CASX;;IACA,MAAMC,IAAG,GAAI,MAAM;MACjBJ,IAAI,CAACC,MAAL,GAAcH,KAAK,CAACO,KAAN,CAAYC,QAAZ,CAAqBC,GAArB,CAA0BC,IAAD,IAAUA,IAAI,CAACC,EAAxC,CAAd;IACD,CAFD;;IAIAtB,SAAS,CAAC,MAAM;MACdiB,IAAI;IACL,CAFQ,CAAT,CAdW,CAkBX;;IACA,MAAMM,QAAO,GAAI,CAACC,KAAD,EAAQC,MAAR,KAAmB;MAClCd,KAAK,CAACO,KAAN,CAAYC,QAAZ,CAAqBC,GAArB,CAA0BC,IAAD,IAAU;QACjC,IAAIA,IAAI,CAACC,EAAL,KAAYG,MAAM,CAACC,IAAvB,EAA6B;UAC3BL,IAAI,CAACM,GAAL,GAAWH,KAAX;QACF;MACD,CAJD;IAKD,CAND,CAnBW,CA2BX;;;IACA,MAAMI,QAAO,GAAI,MAAM;MACrB,IAAIf,IAAI,CAACC,MAAL,CAAYe,MAAZ,KAAuBlB,KAAK,CAACO,KAAN,CAAYC,QAAZ,CAAqBU,MAAhD,EAAwD;QACtDZ,IAAI;MACN,CAFA,MAEO;QACLJ,IAAI,CAACC,MAAL,GAAc,EAAd;MACF;IACD,CAND,CA5BW,CAoCX;;;IACA,MAAMgB,MAAK,GAAKC,IAAD,IAAU;MACvB,OAAOpB,KAAK,CAACO,KAAN,CAAYC,QAAZ,CAAqBa,MAArB,CAA6BX,IAAD,IAAU;QAC3C,OAAOU,IAAG,KAAM,CAAT,GACHlB,IAAI,CAACC,MAAL,CAAYmB,QAAZ,CAAqBZ,IAAI,CAACC,EAA1B,CADG,GAEH,CAACT,IAAI,CAACC,MAAL,CAAYmB,QAAZ,CAAqBZ,IAAI,CAACC,EAA1B,CAFL;MAGD,CAJM,CAAP;IAKD,CAND,CArCW,CA6CX;;;IACA,MAAMY,QAAO,GAAI,MAAM;MACrB,IAAIrB,IAAI,CAACC,MAAL,CAAYe,MAAZ,KAAuB,CAA3B,EAA8B;QAC5BlB,KAAK,CAACwB,MAAN,CAAa,KAAb,EAAoBL,MAAM,CAAC,CAAD,CAA1B;QACAlB,MAAM,CAACwB,IAAP,CAAY;UACVC,IAAI,EAAE,eADI;UAEVC,KAAK,EAAE;YACLC,IAAI,EAAE1B,IAAI,CAACC;UADN;QAFG,CAAZ;MAMF,CARA,MAQO;QACL0B,KAAK,CAACC,IAAN,CAAW,iCAAX;MACF;IACD,CAZD,CA9CW,CA4DX;;;IACA,MAAMC,WAAU,GAAK5B,MAAD,IAAY;MAC9B,IAAIA,MAAM,CAACe,MAAP,KAAkBlB,KAAK,CAACO,KAAN,CAAYC,QAAZ,CAAqBU,MAA3C,EAAmD;QACjDhB,IAAI,CAACE,OAAL,GAAe,IAAf;MACF,CAFA,MAEO;QACLF,IAAI,CAACE,OAAL,GAAe,KAAf;MACF;;MACAF,IAAI,CAACC,MAAL,GAAcA,MAAd;IACD,CAPD,CA7DW,CAsEX;;;IACA,MAAM6B,QAAO,GAAIxC,QAAQ,CAAC,MAAM;MAC9B,IAAIyC,SAAQ,GAAId,MAAM,CAAC,CAAD,CAAtB;MACA,IAAIe,GAAE,GAAI,CAAV;MACAD,SAAS,CAACE,OAAV,CAAmBzB,IAAD,IAAU;QAC1BwB,GAAE,IAAKxB,IAAI,CAACM,GAAL,GAAWN,IAAI,CAAC0B,KAAvB;MACD,CAFD;MAGA,OAAOF,GAAP;IACD,CAPwB,CAAzB,CAvEW,CAgFX;;IACAtC,OAAO,CAACyC,EAAR,CAAW,MAAX,EAAmB,MAAM;MACvBnC,IAAI,CAACG,QAAL,GAAgB,CAACH,IAAI,CAACG,QAAtB;IACD,CAFD,EAjFW,CAqFX;;IACA,MAAMiC,WAAU,GAAI,MAAM;MACxB,IAAIpC,IAAI,CAACC,MAAL,CAAYe,MAAhB,EAAwB;QACtB;QACAlB,KAAK,CAACwB,MAAN,CAAa,QAAb,EAAuBL,MAAM,CAAC,CAAD,CAA7B,EAFsB,CAItB;;QACAjB,IAAI,CAACC,MAAL,GAAc,EAAd,CALsB,CAOtB;;QACA,IAAIH,KAAK,CAACO,KAAN,CAAYC,QAAZ,CAAqBU,MAArB,KAAgC,CAApC,EAAuC;UACrClB,KAAK,CAACwB,MAAN,CAAa,MAAb,EAAqB,QAArB;UACA1B,KAAK,CAACyC,UAAN;QACF;MACF,CAZA,MAYO;QACLV,KAAK,CAACC,IAAN,CAAW,eAAX;MACF;IACD,CAhBD;;IAkBA,OAAO,EACL,GAAGvC,MAAM,CAACW,IAAD,CADJ;MAELF,KAFK;MAGLY,QAHK;MAILW,QAJK;MAKLN,QALK;MAMLc,WANK;MAOLC,QAPK;MAQLM;IARK,CAAP;EAUD;;AArHY,CAAf","names":["declareTypeAlias","onMounted","reactive","toRefs","computed","useStore","useRouter","CourseAdd","emitter","components","props","setup","store","router","data","result","checked","isDelete","init","state","cartList","map","item","id","onChange","value","detail","name","num","choseAll","length","update","type","filter","includes","onSubmit","commit","push","path","query","list","Toast","fail","groupChange","allPrice","countList","sum","forEach","price","on","deleteClick","changeShow"],"sourceRoot":"","sources":["/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue"],"sourcesContent":["<template>\n  <div class=\"cartDetails\">\n    <!-- Goods List -->\n    <div class=\"content\">\n      <van-checkbox-group v-model=\"result\" @change=\"groupChange\">\n        <div v-for=\"(i, index) in store.state.cartList\">\n          <CourseAdd :item=\"i\" :showCheckbox=\"true\" :onChange=\"onChange\" />\n        </div>\n      </van-checkbox-group>\n    </div>\n    <!-- Settle bill -->\n    <van-submit-bar\n      :price=\"allPrice * 100\"\n      button-text=\"Checkout\"\n      @submit=\"onSubmit\"\n      class=\"submit-all\"\n      button-color=\"#ffc400\"\n      currency=\"$\"\n      v-if=\"isDelete\"\n    >\n      <van-checkbox v-model=\"checked\" checked-color=\"#ffc400\" @click=\"choseAll\"\n        >All</van-checkbox\n      >\n    </van-submit-bar>\n\n    <!-- delete -->\n    <div class=\"buy\" v-else>\n      <div class=\"left\">\n        <van-checkbox\n          v-model=\"checked\"\n          checked-color=\"#ffc400\"\n          @click=\"choseAll\"\n          >All</van-checkbox\n        >\n      </div>\n      <div class=\"delete\" @click=\"deleteClick\">Delete</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { declareTypeAlias } from '@babel/types';\nimport { onMounted, reactive, toRefs, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport CourseAdd from '../../../components/CourseAdd.vue';\nimport emitter from '../../../common/js/eventbus.js';\n\nexport default {\n  components: { CourseAdd },\n  props: ['changeShow'],\n  setup(props) {\n    const store = useStore();\n    const router = useRouter();\n    let data = reactive({\n      result: [],\n      checked: true,\n      isDelete: true,\n    });\n\n    //goods default selection initialization\n    const init = () => {\n      data.result = store.state.cartList.map((item) => item.id);\n    };\n\n    onMounted(() => {\n      init();\n    });\n\n    //goods number sycchronization\n    const onChange = (value, detail) => {\n      store.state.cartList.map((item) => {\n        if (item.id === detail.name) {\n          item.num = value;\n        }\n      });\n    };\n\n    //select all and unselect all\n    const choseAll = () => {\n      if (data.result.length !== store.state.cartList.length) {\n        init();\n      } else {\n        data.result = [];\n      }\n    };\n\n    //update data\n    const update = (type) => {\n      return store.state.cartList.filter((item) => {\n        return type === 2\n          ? data.result.includes(item.id)\n          : !data.result.includes(item.id);\n      });\n    };\n\n    //checkout\n    const onSubmit = () => {\n      if (data.result.length !== 0) {\n        store.commit('PAY', update(2));\n        router.push({\n          path: './createorder',\n          query: {\n            list: data.result,\n          },\n        });\n      } else {\n        Toast.fail('Please select items to checkout');\n      }\n    };\n\n    //every select trigger\n    const groupChange = (result) => {\n      if (result.length === store.state.cartList.length) {\n        data.checked = true;\n      } else {\n        data.checked = false;\n      }\n      data.result = result;\n    };\n\n    //price in total\n    const allPrice = computed(() => {\n      let countList = update(2);\n      let sum = 0;\n      countList.forEach((item) => {\n        sum += item.num * item.price;\n      });\n      return sum;\n    });\n\n    //listen edit click\n    emitter.on('edit', () => {\n      data.isDelete = !data.isDelete;\n    });\n\n    //delete button\n    const deleteClick = () => {\n      if (data.result.length) {\n        //update cart data after delete\n        store.commit('DELETE', update(1));\n\n        //select after delete\n        data.result = [];\n\n        //cart is empty\n        if (store.state.cartList.length === 0) {\n          store.commit('EDIT', 'delete');\n          props.changeShow();\n        }\n      } else {\n        Toast.fail('Please select');\n      }\n    };\n\n    return {\n      ...toRefs(data),\n      store,\n      onChange,\n      onSubmit,\n      choseAll,\n      groupChange,\n      allPrice,\n      deleteClick,\n    };\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n/deep/ .van-button--normal {\n  font-size: 10px;\n}\n/deep/ .van-submit-bar__bar {\n  font-size: 8px;\n  padding: 5px;\n}\n\n.cartDetails {\n  font-size: 14px;\n  flex: 1;\n  position: relative;\n  overflow-y: auto;\n  padding: 10px 10px 55px;\n  .submit-all {\n    position: fixed;\n    bottom: 20px;\n  }\n\n  .buy {\n    position: fixed;\n    bottom: 20px;\n    right: 0;\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    background-color: #fff;\n    border-radius: 5px;\n    height: 25px;\n    align-items: center;\n    padding: 0 16px;\n    box-sizing: border-box;\n    .left {\n      display: flex;\n      align-items: center;\n    }\n    .delete {\n      color: #fff;\n      background-color: #ffc400;\n      border-radius: 20px;\n      font-size: 10px;\n      font-weight: 500;\n      width: 50px;\n      height: 20px;\n      text-align: center;\n      line-height: 20px;\n    }\n  }\n\n  .content {\n    padding: 10px;\n    background-color: #fff;\n    border-radius: 10px;\n  }\n}\n</style>\n<style>\n:root {\n  --van-checkbox-size: 8px;\n  --van-action-bar-icon-size: 13px;\n  --van-submit-bar-height: 15px;\n  --van-submit-bar-button-width: 55px;\n  --van-submit-bar-price-font-size: 8px;\n  --van-submit-bar-price-integer-font-size: 8px;\n  --van-submit-bar-text-font-size: 10px;\n  --van-submit-bar-tip-font-size: 10px;\n  --van-submit-bar-tip-icon-size: 6px;\n  --van-submit-bar-button-height: 20px;\n}\n</style>\n"]}]}
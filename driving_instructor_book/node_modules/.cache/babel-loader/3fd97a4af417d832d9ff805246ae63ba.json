{"remainingRequest":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/babel-loader/lib/index.js!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/createOrder/CreateOrder.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/createOrder/CreateOrder.vue","mtime":1664076303835},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/babel.config.js","mtime":1658634198971},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js","mtime":1663066735138},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/babel-loader/lib/index.js","mtime":1663066738371},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js","mtime":1663066735138},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/index.js","mtime":1663066738351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJ2YW50L2VzL2RpYWxvZy9zdHlsZSI7CmltcG9ydCBfRGlhbG9nIGZyb20gInZhbnQvZXMvZGlhbG9nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgSGVhZGVyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvSGVhZGVyLnZ1ZSc7CmltcG9ydCB7IHRvUmVmcywgcmVhY3RpdmUsIG9uTW91bnRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUm91dGUgfSBmcm9tICd2dWUtcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRlcgogIH0sCgogIHNldHVwKCkgewogICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICBjb25zdCByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICBsZXQgZGF0YSA9IHJlYWN0aXZlKHsKICAgICAgY3VycmVudENvbnRhY3Q6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICB0ZWw6ICcnCiAgICAgIH0sCiAgICAgIGFsbFByaWNlOiAwCiAgICB9KTsgLy91c2VyIGRhdGEgaW5pdGlhbGl6YXRpb24KCiAgICBjb25zdCBpbml0VXNlciA9ICgpID0+IHsKICAgICAgc3RvcmUuc3RhdGUudXNlckFkZHJlc3MuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpZiAoaXRlbS5pc0RlZmF1bHQpIHsKICAgICAgICAgIGRhdGEuY3VycmVudENvbnRhY3QubmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgICAgIGRhdGEuY3VycmVudENvbnRhY3QudGVsID0gaXRlbS50ZWw7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07IC8vcHJpY2UgaW4gdG90YWwgaW5pdGlhbGl6YXRpb24KCgogICAgY29uc3QgaW5pdFByaWNlID0gKCkgPT4gewogICAgICBsZXQgcHJpY2UgPSAwOwoKICAgICAgaWYgKHN0b3JlLnN0YXRlLm9yZGVyTGlzdC5sZW5ndGgpIHsKICAgICAgICBzdG9yZS5zdGF0ZS5vcmRlckxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIHByaWNlICs9IGl0ZW0ubnVtICogaXRlbS5wcmljZTsKICAgICAgICB9KTsKICAgICAgICBkYXRhLmFsbFByaWNlID0gcHJpY2U7CiAgICAgIH0KICAgIH07CgogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgaW5pdFByaWNlKCk7CiAgICAgIGluaXRVc2VyKCk7CiAgICB9KTsgLy9hZGRyZXNzIGVkaXQgYnV0dG9uCgogICAgY29uc3Qgb25FZGl0ID0gKCkgPT4gewogICAgICByb3V0ZXIucHVzaCgnLi9hZGRyZXNzJyk7CiAgICB9OyAvL2NyZWF0ZSBvcmRlciBidXR0b24KCgogICAgY29uc3QgaGFuZGxlQ3JlYXRlT3JkZXIgPSAoKSA9PiB7CiAgICAgIF9EaWFsb2cuYWxlcnQoewogICAgICAgIHRpdGxlOiAnVGhhbmtzIScsCiAgICAgICAgbWVzc2FnZTogJ1dlIGhhdmUgcmVjZWl2ZWQgeW91ciBvcmRlci4nCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIGxldCBuZXdMaXN0ID0gc3RvcmUuc3RhdGUuY2FydExpc3QuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgICAgcmV0dXJuICFyb3V0ZS5xdWVyeS5saXN0LmluY2x1ZGVzKGl0ZW0uaWQgKyAnJyk7CiAgICAgICAgfSk7CiAgICAgICAgc3RvcmUuY29tbWl0KCdERUxFVEUnLCBuZXdMaXN0KTsKICAgICAgICBzdG9yZS5jb21taXQoJ1VQREFURU9SREVSJyk7CiAgICAgICAgcm91dGVyLnB1c2goJy4vb3JkZXInKTsKICAgICAgfSk7CiAgICB9OwoKICAgIHJldHVybiB7IC4uLnRvUmVmcyhkYXRhKSwKICAgICAgb25FZGl0LAogICAgICBzdG9yZSwKICAgICAgaGFuZGxlQ3JlYXRlT3JkZXIKICAgIH07CiAgfQoKfTs="},{"version":3,"mappings":";;;AAsCA,OAAOA,MAAP,MAAmB,6BAAnB;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,SAA3B,QAA4C,KAA5C;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,YAApC;AAEA,eAAe;EACbC,UAAU,EAAE;IACVP;EADU,CADC;;EAIbQ,KAAK,GAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,EAAtB;IACA,MAAMM,MAAK,GAAIL,SAAS,EAAxB;IACA,MAAMM,KAAI,GAAIL,QAAQ,EAAtB;IACA,IAAIM,IAAG,GAAIV,QAAQ,CAAC;MAClBW,cAAc,EAAE;QACdC,IAAI,EAAE,EADQ;QAEdC,GAAG,EAAE;MAFS,CADE;MAKlBC,QAAQ,EAAE;IALQ,CAAD,CAAnB,CAJM,CAYN;;IACA,MAAMC,QAAO,GAAI,MAAM;MACrBR,KAAK,CAACS,KAAN,CAAYC,WAAZ,CAAwBC,OAAxB,CAAiCC,IAAD,IAAU;QACxC,IAAIA,IAAI,CAACC,SAAT,EAAoB;UAClBV,IAAI,CAACC,cAAL,CAAoBC,IAApB,GAA2BO,IAAI,CAACP,IAAhC;UACAF,IAAI,CAACC,cAAL,CAAoBE,GAApB,GAA0BM,IAAI,CAACN,GAA/B;QACF;MACD,CALD;IAMD,CAPD,CAbM,CAsBN;;;IACA,MAAMQ,SAAQ,GAAI,MAAM;MACtB,IAAIC,KAAI,GAAI,CAAZ;;MACA,IAAIf,KAAK,CAACS,KAAN,CAAYO,SAAZ,CAAsBC,MAA1B,EAAkC;QAChCjB,KAAK,CAACS,KAAN,CAAYO,SAAZ,CAAsBL,OAAtB,CAA+BC,IAAD,IAAU;UACtCG,KAAI,IAAKH,IAAI,CAACM,GAAL,GAAWN,IAAI,CAACG,KAAzB;QACD,CAFD;QAGAZ,IAAI,CAACI,QAAL,GAAgBQ,KAAhB;MACF;IACD,CARD;;IAUArB,SAAS,CAAC,MAAM;MACdoB,SAAS;MACTN,QAAQ;IACT,CAHQ,CAAT,CAjCM,CAsCN;;IACA,MAAMW,MAAK,GAAI,MAAM;MACnBlB,MAAM,CAACmB,IAAP,CAAY,WAAZ;IACD,CAFD,CAvCM,CA2CN;;;IACA,MAAMC,iBAAgB,GAAI,MAAM;MAC9B,QAAOC,KAAP,CAAa;QACXC,KAAK,EAAE,SADI;QAEXC,OAAO,EAAE;MAFE,CAAb,EAGGC,IAHH,CAGQ,MAAM;QACZ,IAAIC,OAAM,GAAI1B,KAAK,CAACS,KAAN,CAAYkB,QAAZ,CAAqBC,MAArB,CAA6BhB,IAAD,IAAU;UAClD,OAAO,CAACV,KAAK,CAAC2B,KAAN,CAAYC,IAAZ,CAAiBC,QAAjB,CAA0BnB,IAAI,CAACoB,EAAL,GAAU,EAApC,CAAR;QACD,CAFa,CAAd;QAGAhC,KAAK,CAACiC,MAAN,CAAa,QAAb,EAAuBP,OAAvB;QACA1B,KAAK,CAACiC,MAAN,CAAa,aAAb;QACAhC,MAAM,CAACmB,IAAP,CAAY,SAAZ;MACD,CAVD;IAWD,CAZD;;IAcA,OAAO,EACL,GAAG5B,MAAM,CAACW,IAAD,CADJ;MAELgB,MAFK;MAGLnB,KAHK;MAILqB;IAJK,CAAP;EAMD;;AApEY,CAAf","names":["Header","toRefs","reactive","onMounted","useStore","useRouter","useRoute","components","setup","store","router","route","data","currentContact","name","tel","allPrice","initUser","state","userAddress","forEach","item","isDefault","initPrice","price","orderList","length","num","onEdit","push","handleCreateOrder","alert","title","message","then","newList","cartList","filter","query","list","includes","id","commit"],"sourceRoot":"","sources":["/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/createOrder/CreateOrder.vue"],"sourcesContent":["<template>\n  <div class=\"create_order\">\n    <Header title=\"Create Order\" />\n    <van-contact-card\n      type=\"edit\"\n      :tel=\"currentContact.tel\"\n      :name=\"currentContact.name\"\n      @click=\"onEdit\"\n    />\n    <div class=\"content\">\n      <div v-for=\"i in store.state.orderList\">\n        <van-card\n          :num=\"i.num\"\n          :price=\"i.price\"\n          :title=\"i.title\"\n          :thumb=\"i.pic\"\n          currency=\"$\"\n        />\n      </div>\n    </div>\n    <div class=\"pay-wrap\">\n      <div class=\"price\">\n        <span>Price</span>\n        <span>$ {{ allPrice }}</span>\n      </div>\n      <van-button\n        class=\"pay-btn\"\n        type=\"primary\"\n        @click=\"handleCreateOrder\"\n        color=\"#ffc400\"\n        block\n        >Confirm</van-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from '../../components/Header.vue';\nimport { toRefs, reactive, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter, useRoute } from 'vue-router';\nimport { Dialog } from 'vant';\nexport default {\n  components: {\n    Header,\n  },\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n    let data = reactive({\n      currentContact: {\n        name: '',\n        tel: '',\n      },\n      allPrice: 0,\n    });\n\n    //user data initialization\n    const initUser = () => {\n      store.state.userAddress.forEach((item) => {\n        if (item.isDefault) {\n          data.currentContact.name = item.name;\n          data.currentContact.tel = item.tel;\n        }\n      });\n    };\n\n    //price in total initialization\n    const initPrice = () => {\n      let price = 0;\n      if (store.state.orderList.length) {\n        store.state.orderList.forEach((item) => {\n          price += item.num * item.price;\n        });\n        data.allPrice = price;\n      }\n    };\n\n    onMounted(() => {\n      initPrice();\n      initUser();\n    });\n\n    //address edit button\n    const onEdit = () => {\n      router.push('./address');\n    };\n\n    //create order button\n    const handleCreateOrder = () => {\n      Dialog.alert({\n        title: 'Thanks!',\n        message: 'We have received your order.',\n      }).then(() => {\n        let newList = store.state.cartList.filter((item) => {\n          return !route.query.list.includes(item.id + '');\n        });\n        store.commit('DELETE', newList);\n        store.commit('UPDATEORDER');\n        router.push('./order');\n      });\n    };\n\n    return {\n      ...toRefs(data),\n      onEdit,\n      store,\n      handleCreateOrder,\n    };\n  },\n};\n</script>\n<style>\n:root {\n  --van-card-padding: 5px;\n  --van-card-font-size: 10px;\n  --van-card-thumb-size: 50px;\n  --van-card-thumb-border-radius: 5px;\n  --van-card-title-line-height: 10px;\n  --van-card-origin-price-font-size: 10px;\n  --van-card-price-font-size: 10px;\n  --van-card-price-integer-font-size: 10px;\n  --van-dialog-width: 150px;\n  --van-dialog-confirm-button-text-color: #ffc400;\n  --van-dialog-message-padding: 0px;\n  --van-dialog-button-height: 35px;\n}\n</style>\n\n<style lang=\"less\" scoped>\n/deep/ .van-cell {\n  font-size: 8px;\n}\n\n/deep/ .van-contact-card {\n  padding: 10px;\n}\n\n// /deep/ .van-dialog__message {\n//     padding:1px;\n// }\n\n.create_order {\n  display: flex;\n  flex-flow: column;\n  height: 100%;\n  .content {\n    flex: 1;\n    overflow-y: auto;\n  }\n  .pay-wrap {\n    padding: 5px 0;\n    width: 100%;\n\n    background: #fff;\n    border-top: 1px solid #e9e9e9;\n    > div {\n      display: flex;\n      justify-content: space-between;\n      padding: 0 5%;\n      margin: 5px 0;\n      font-size: 9px;\n      span:nth-child(2) {\n        color: red;\n        font-size: 10px;\n      }\n    }\n    .pay-btn {\n      width: 90%;\n      margin: 0 auto;\n      height: 20px;\n    }\n  }\n}\n</style>\n"]}]}
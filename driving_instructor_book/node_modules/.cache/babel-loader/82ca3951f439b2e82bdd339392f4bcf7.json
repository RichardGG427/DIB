{"remainingRequest":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/babel-loader/lib/index.js!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue?vue&type=template&id=ff70abd0&scoped=true","dependencies":[{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue","mtime":1663917139985},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/babel.config.js","mtime":1658634198971},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js","mtime":1663066735138},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/babel-loader/lib/index.js","mtime":1663066738371},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1663066740834},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/cache-loader/dist/cjs.js","mtime":1663066735138},{"path":"/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/node_modules/vue-loader-v16/dist/index.js","mtime":1663066738351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCBjcmVhdGVUZXh0Vk5vZGUgYXMgX2NyZWF0ZVRleHRWTm9kZSwgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKY29uc3QgX3dpdGhTY29wZUlkID0gbiA9PiAoX3B1c2hTY29wZUlkKCJkYXRhLXYtZmY3MGFiZDAiKSwgbiA9IG4oKSwgX3BvcFNjb3BlSWQoKSwgbik7Cgpjb25zdCBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiY2FydERldGFpbHMiCn07CmNvbnN0IF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJjb250ZW50Igp9OwoKY29uc3QgX2hvaXN0ZWRfMyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCJBbGwiKTsKCmNvbnN0IF9ob2lzdGVkXzQgPSB7CiAgY2xhc3M6ICJidXkiCn07CmNvbnN0IF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJsZWZ0Igp9OwoKY29uc3QgX2hvaXN0ZWRfNiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCJBbGwiKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgY29uc3QgX2NvbXBvbmVudF9Db3Vyc2VBZGQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiQ291cnNlQWRkIik7CgogIGNvbnN0IF9jb21wb25lbnRfdmFuX2NoZWNrYm94X2dyb3VwID0gX3Jlc29sdmVDb21wb25lbnQoInZhbi1jaGVja2JveC1ncm91cCIpOwoKICBjb25zdCBfY29tcG9uZW50X3Zhbl9jaGVja2JveCA9IF9yZXNvbHZlQ29tcG9uZW50KCJ2YW4tY2hlY2tib3giKTsKCiAgY29uc3QgX2NvbXBvbmVudF92YW5fc3VibWl0X2JhciA9IF9yZXNvbHZlQ29tcG9uZW50KCJ2YW4tc3VibWl0LWJhciIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIEdvb2RzIExpc3QgIiksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF92YW5fY2hlY2tib3hfZ3JvdXAsIHsKICAgIG1vZGVsVmFsdWU6IF9jdHgucmVzdWx0LAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9ICRldmVudCA9PiBfY3R4LnJlc3VsdCA9ICRldmVudCksCiAgICBvbkNoYW5nZTogJHNldHVwLmdyb3VwQ2hhbmdlCiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoJHNldHVwLnN0b3JlLnN0YXRlLmNhcnRMaXN0LCAoaSwgaW5kZXgpID0+IHsKICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgbnVsbCwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0NvdXJzZUFkZCwgewogICAgICAgIGl0ZW06IGksCiAgICAgICAgc2hvd0NoZWNrYm94OiB0cnVlLAogICAgICAgIG9uQ2hhbmdlOiAkc2V0dXAub25DaGFuZ2UKICAgICAgfSwgbnVsbCwgOAogICAgICAvKiBQUk9QUyAqLwogICAgICAsIFsiaXRlbSIsICJvbkNoYW5nZSJdKV0pOwogICAgfSksIDI1NgogICAgLyogVU5LRVlFRF9GUkFHTUVOVCAqLwogICAgKSldKSwKICAgIF86IDEKICAgIC8qIFNUQUJMRSAqLwoKICB9LCA4CiAgLyogUFJPUFMgKi8KICAsIFsibW9kZWxWYWx1ZSIsICJvbkNoYW5nZSJdKV0pLCBfY3JlYXRlQ29tbWVudFZOb2RlKCIgU2V0dGxlIGJpbGwgIiksIF9jdHguaXNEZWxldGUgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF92YW5fc3VibWl0X2JhciwgewogICAga2V5OiAwLAogICAgcHJpY2U6ICRzZXR1cC5hbGxQcmljZSAqIDEwMCwKICAgICJidXR0b24tdGV4dCI6ICJDaGVja291dCIsCiAgICBvblN1Ym1pdDogJHNldHVwLm9uU3VibWl0LAogICAgY2xhc3M6ICJzdWJtaXQtYWxsIiwKICAgICJidXR0b24tY29sb3IiOiAiI2ZmYzQwMCIsCiAgICBjdXJyZW5jeTogIiQiCiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X3Zhbl9jaGVja2JveCwgewogICAgICBtb2RlbFZhbHVlOiBfY3R4LmNoZWNrZWQsCiAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSAkZXZlbnQgPT4gX2N0eC5jaGVja2VkID0gJGV2ZW50KSwKICAgICAgImNoZWNrZWQtY29sb3IiOiAiI2ZmYzQwMCIsCiAgICAgIG9uQ2xpY2s6ICRzZXR1cC5jaG9zZUFsbAogICAgfSwgewogICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2hvaXN0ZWRfM10pLAogICAgICBfOiAxCiAgICAgIC8qIFNUQUJMRSAqLwoKICAgIH0sIDgKICAgIC8qIFBST1BTICovCiAgICAsIFsibW9kZWxWYWx1ZSIsICJvbkNsaWNrIl0pXSksCiAgICBfOiAxCiAgICAvKiBTVEFCTEUgKi8KCiAgfSwgOAogIC8qIFBST1BTICovCiAgLCBbInByaWNlIiwgIm9uU3VibWl0Il0pKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCB7CiAgICBrZXk6IDEKICB9LCBbX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIGRlbGV0ZSAiKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzUsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF92YW5fY2hlY2tib3gsIHsKICAgIG1vZGVsVmFsdWU6IF9jdHguY2hlY2tlZCwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSAkZXZlbnQgPT4gX2N0eC5jaGVja2VkID0gJGV2ZW50KSwKICAgICJjaGVja2VkLWNvbG9yIjogIiNmZmM0MDAiLAogICAgb25DbGljazogJHNldHVwLmNob3NlQWxsCiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19ob2lzdGVkXzZdKSwKICAgIF86IDEKICAgIC8qIFNUQUJMRSAqLwoKICB9LCA4CiAgLyogUFJPUFMgKi8KICAsIFsibW9kZWxWYWx1ZSIsICJvbkNsaWNrIl0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICAgIGNsYXNzOiAiZGVsZXRlIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gKC4uLmFyZ3MpID0+ICRzZXR1cC5kZWxldGVDbGljayAmJiAkc2V0dXAuZGVsZXRlQ2xpY2soLi4uYXJncykpCiAgfSwgIkRlbGV0ZSIpXSldLCAyMTEyCiAgLyogU1RBQkxFX0ZSQUdNRU5ULCBERVZfUk9PVF9GUkFHTUVOVCAqLwogICkpXSk7Cn0="},{"version":3,"mappings":";;;;;EACOA,KAAK,EAAC;;;EAEJA,KAAK,EAAC;;;iDAkBN;;;EAKAA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;iDAKN;;;;;;;;;;;uBA/BTC,oBAoCM,KApCN,cAoCM,CAnCJC,mCAmCI,EAlCJC,oBAMM,KANN,cAMM,CALJC,aAIqBC,6BAJrB,EAIqB;gBAJQC,WAIR;+DAJQA,cAAMC,OAId;IAJiBC,QAAM,EAAEC;EAIzB,CAJrB;sBACO,MAA0C,oBAA/CR,oBAEMS,SAFN,EAEM,IAFN,EAEMC,YAFoBF,aAAMG,KAAN,CAAYC,QAEhC,EAFwC,CAAjCC,CAAiC,EAA9BC,KAA8B,KAAzB;2BAArBd,oBAEM,KAFN,EAEM,IAFN,EAEM,CADJG,aAAiEY,oBAAjE,EAAiE;QAArDC,IAAI,EAAEH,CAA+C;QAA3CI,YAAY,EAAE,IAA6B;QAAtBV,QAAQ,EAAEC;MAAY,CAAjE;;MAAA,uBACI,CAFN;KAEM,CAFN;;IAAA,CAA+C;;;;GADjD;;EAAA,6BAKI,CANN,CAkCI,EA3BJP,oCA2BI,EAnBII,+BAPRa,aAYiBC,yBAZjB,EAYiB;UAAA;IAXdC,KAAK,EAAEZ,kBAAQ,GAWD;IAVf,eAAY,UAUG;IATda,QAAM,EAAEb,eASM;IARfT,KAAK,EAAC,YAQS;IAPf,gBAAa,SAOE;IANfuB,QAAQ,EAAC;EAMM,CAZjB;sBASE,MAEC,CAFDnB,aAECoB,uBAFD,EAEC;kBAFsBlB,YAEtB;iEAFsBA,eAAOC,OAE7B;MAF+B,iBAAc,SAE7C;MAFwDkB,OAAK,EAAEhB;IAE/D,CAFD;wBACG,MAAG;;;;KADN;;IAAA,4BAEC;;;;GAXH;;EAAA,2CAeAR,oBAUMS,SAVN,EAUM;IAAAgB;EAAA,CAVN,EAUM,CAXNxB,+BAWM,EAVNC,oBAUM,KAVN,cAUM,CATJA,oBAOM,KAPN,cAOM,CANJC,aAKCoB,uBALD,EAKC;gBAJUlB,YAIV;+DAJUA,eAAOC,OAIjB;IAHC,iBAAc,SAGf;IAFEkB,OAAK,EAAEhB;EAET,CALD;sBAIG,MAAG;;;;GAJN;;EAAA,4BAMI,CAPN,CASI,EADJN,oBAAqD,KAArD,EAAqD;IAAhDH,KAAK,EAAC,QAA0C;IAAhCyB,OAAK,yCAAEhB,iDAAF;EAA2B,CAArD,EAAyC,QAAzC,CACI,CAVN,CAUM,CAVN;;EAAA,EAWI,CApCN","names":["class","_createElementBlock","_createCommentVNode","_createElementVNode","_createVNode","_component_van_checkbox_group","_ctx","$event","onChange","$setup","_Fragment","_renderList","state","cartList","i","index","_component_CourseAdd","item","showCheckbox","_createBlock","_component_van_submit_bar","price","onSubmit","currency","_component_van_checkbox","onClick","key"],"sourceRoot":"","sources":["/Users/renxianggao/Desktop/DrivingInstructorBook/driving_instructor_book/src/pages/myCart/components/CartDetails.vue"],"sourcesContent":["<template>\n  <div class=\"cartDetails\">\n    <!-- Goods List -->\n    <div class=\"content\">\n      <van-checkbox-group v-model=\"result\" @change=\"groupChange\">\n        <div v-for=\"(i, index) in store.state.cartList\">\n          <CourseAdd :item=\"i\" :showCheckbox=\"true\" :onChange=\"onChange\" />\n        </div>\n      </van-checkbox-group>\n    </div>\n    <!-- Settle bill -->\n    <van-submit-bar\n      :price=\"allPrice * 100\"\n      button-text=\"Checkout\"\n      @submit=\"onSubmit\"\n      class=\"submit-all\"\n      button-color=\"#ffc400\"\n      currency=\"$\"\n      v-if=\"isDelete\"\n    >\n      <van-checkbox v-model=\"checked\" checked-color=\"#ffc400\" @click=\"choseAll\"\n        >All</van-checkbox\n      >\n    </van-submit-bar>\n\n    <!-- delete -->\n    <div class=\"buy\" v-else>\n      <div class=\"left\">\n        <van-checkbox\n          v-model=\"checked\"\n          checked-color=\"#ffc400\"\n          @click=\"choseAll\"\n          >All</van-checkbox\n        >\n      </div>\n      <div class=\"delete\" @click=\"deleteClick\">Delete</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { declareTypeAlias } from '@babel/types';\nimport { onMounted, reactive, toRefs, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport CourseAdd from '../../../components/CourseAdd.vue';\nimport emitter from '../../../common/js/eventbus.js';\n\nexport default {\n  components: { CourseAdd },\n  props: ['changeShow'],\n  setup(props) {\n    const store = useStore();\n    const router = useRouter();\n    let data = reactive({\n      result: [],\n      checked: true,\n      isDelete: true,\n    });\n\n    //goods default selection initialization\n    const init = () => {\n      data.result = store.state.cartList.map((item) => item.id);\n    };\n\n    onMounted(() => {\n      init();\n    });\n\n    //goods number sycchronization\n    const onChange = (value, detail) => {\n      store.state.cartList.map((item) => {\n        if (item.id === detail.name) {\n          item.num = value;\n        }\n      });\n    };\n\n    //select all and unselect all\n    const choseAll = () => {\n      if (data.result.length !== store.state.cartList.length) {\n        init();\n      } else {\n        data.result = [];\n      }\n    };\n\n    //update data\n    const update = (type) => {\n      return store.state.cartList.filter((item) => {\n        return type === 2\n          ? data.result.includes(item.id)\n          : !data.result.includes(item.id);\n      });\n    };\n\n    //checkout\n    const onSubmit = () => {\n      if (data.result.length !== 0) {\n        store.commit('PAY', update(2));\n        router.push({\n          path: './createorder',\n          query: {\n            list: data.result,\n          },\n        });\n      } else {\n        Toast.fail('Please select items to checkout');\n      }\n    };\n\n    //every select trigger\n    const groupChange = (result) => {\n      if (result.length === store.state.cartList.length) {\n        data.checked = true;\n      } else {\n        data.checked = false;\n      }\n      data.result = result;\n    };\n\n    //price in total\n    const allPrice = computed(() => {\n      let countList = update(2);\n      let sum = 0;\n      countList.forEach((item) => {\n        sum += item.num * item.price;\n      });\n      return sum;\n    });\n\n    //listen edit click\n    emitter.on('edit', () => {\n      data.isDelete = !data.isDelete;\n    });\n\n    //delete button\n    const deleteClick = () => {\n      if (data.result.length) {\n        //update cart data after delete\n        store.commit('DELETE', update(1));\n\n        //select after delete\n        data.result = [];\n\n        //cart is empty\n        if (store.state.cartList.length === 0) {\n          store.commit('EDIT', 'delete');\n          props.changeShow();\n        }\n      } else {\n        Toast.fail('Please select');\n      }\n    };\n\n    return {\n      ...toRefs(data),\n      store,\n      onChange,\n      onSubmit,\n      choseAll,\n      groupChange,\n      allPrice,\n      deleteClick,\n    };\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n/deep/ .van-button--normal {\n  font-size: 10px;\n}\n/deep/ .van-submit-bar__bar {\n  font-size: 8px;\n  padding: 5px;\n}\n\n.cartDetails {\n  font-size: 14px;\n  flex: 1;\n  position: relative;\n  overflow-y: auto;\n  padding: 10px 10px 55px;\n  .submit-all {\n    position: fixed;\n    bottom: 20px;\n  }\n\n  .buy {\n    position: fixed;\n    bottom: 20px;\n    right: 0;\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    background-color: #fff;\n    border-radius: 5px;\n    height: 25px;\n    align-items: center;\n    padding: 0 16px;\n    box-sizing: border-box;\n    .left {\n      display: flex;\n      align-items: center;\n    }\n    .delete {\n      color: #fff;\n      background-color: #ffc400;\n      border-radius: 20px;\n      font-size: 10px;\n      font-weight: 500;\n      width: 50px;\n      height: 20px;\n      text-align: center;\n      line-height: 20px;\n    }\n  }\n\n  .content {\n    padding: 10px;\n    background-color: #fff;\n    border-radius: 10px;\n  }\n}\n</style>\n<style>\n:root {\n  --van-checkbox-size: 8px;\n  --van-action-bar-icon-size: 13px;\n  --van-submit-bar-height: 15px;\n  --van-submit-bar-button-width: 55px;\n  --van-submit-bar-price-font-size: 8px;\n  --van-submit-bar-price-integer-font-size: 8px;\n  --van-submit-bar-text-font-size: 10px;\n  --van-submit-bar-tip-font-size: 10px;\n  --van-submit-bar-tip-icon-size: 6px;\n  --van-submit-bar-button-height: 20px;\n}\n</style>\n"]}]}